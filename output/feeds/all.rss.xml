<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>loaxsc's blog</title><link>/</link><description></description><lastBuildDate>Sun, 09 Dec 2018 00:00:00 +0800</lastBuildDate><item><title>利用 FreePic2Pic 製作多層 PDF</title><link>/li-yong-freepic2pic-zhi-zuo-duo-ceng-pdf.html</link><description>&lt;h1&gt;利用 FreePic2Pic 製作多層 PDF&lt;/h1&gt;
&lt;p&gt;在看 FreePic2Pdf 的說明文件時發現 FreePic2Pdf 有作多層 PDF 的功能，這功能使黑白文字混搭彩色插圖成為可能，我忍不任嘗試了一下。&lt;/p&gt;
&lt;p&gt;因為將文字部分轉成黑白圖片一定要放大效果才好，連帶著插圖也要放大。為了避免增加太多檔案體積，用 Imagemagick 放大插圖時採用 -scale 的方式。換句話說就是先用 -resize 把圖片放大一輪，然後找出有插圖的部分，用 -scale 放大後取出插圖，並將座標資料存入 page_with_pic.info 中。&lt;/p&gt;
&lt;p&gt;要用 FreePic2Pdf 做混搭的多層PDF的話，除了要製作FreePic2Pdf.itf這個文件，檔案命名還要符合它的要求。這個環節讓我卡超久，因為還有一個條件在 FreePic2Pdf 說明文件中沒提。它還要求多層頁面必須有一個同名的圖檔，就是說除了 page1.000 page1.001 page1.002 …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">loaxsc</dc:creator><pubDate>Sun, 09 Dec 2018 00:00:00 +0800</pubDate><guid isPermaLink="false">tag:None,2018-12-09:/li-yong-freepic2pic-zhi-zuo-duo-ceng-pdf.html</guid></item><item><title>移除浮水印的方法</title><link>/yi-chu-fu-shui-yin-de-fang-fa.html</link><description>&lt;h1&gt;移除 watermark&lt;/h1&gt;
&lt;p&gt;常常在讀電子書時見到頁面中有浮水印，在沒接觸 Imagemagick 前，只會移除那種淡淡的、單色，只要簡單地提高對比度或亮度就可以移除的浮水印&lt;/p&gt;
&lt;p&gt;&lt;img alt="簡單的浮水印" src="/img/021.png"&gt;&lt;/p&gt;
&lt;p&gt;如果說遇到比較複雜的圖案，就只能默默的接受。在研究使用 Imagemagick 時意外發現兩種移除浮水印的方法，相對簡單的調整對比和亮度而言，可以說是移除的非常漂亮。 第一種方法針對的是在固定位置的浮水印，如果你可以找到用來做浮水印的原始圖片，那固定位置的浮水印是可以漂亮的移除的。第二種方法針對的是彩色的浮水印。電子書內的圖片因為主要的內容是黑白的文字，所以如果遇到彩色的浮水印，知道方法的話也是有辨法移除的。&lt;/p&gt;
&lt;h2&gt;移除固定位置的浮水印&lt;/h2&gt;
&lt;p&gt;移除固定位置浮水印的原理是這樣的，先找到原始做為浮水印的圖案，這很容易，因為電子書中有些浮水印會打在空白處，找到該處把浮水印擷取下即可取得浮水印的原始圖案。擷取時記得把擷取的位置和尺寸記下來，然後就可以編寫 Imagemagick 的指令下去批次把浮水印移除掉。&lt;/p&gt;
&lt;p&gt;拿《數學之美》第一章為例，這本電子書的浮水印在固定位置，而且不是簡單的單色、淡色，無法在不破壞文字的前提下靠調整對比、亮度或曲線來移除它。&lt;/p&gt;
&lt;p&gt;&lt;img alt="數學之美的浮水印，雖然位置固定，但是圖案的結構複雜" src="/img/016.png"&gt;&lt;/p&gt;
&lt;p&gt;我們先找到空白處的浮水印，擷取並記錄 geometry 資訊。我是用 gimp 來做這個步驟，因為用滑鼠大致選取好範圍後，可以利用方向鍵對選取方塊進行微調選取的尺寸及位置 …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">loaxsc</dc:creator><pubDate>Sun, 09 Dec 2018 00:00:00 +0800</pubDate><guid isPermaLink="false">tag:None,2018-12-09:/yi-chu-fu-shui-yin-de-fang-fa.html</guid></item><item><title>優化 PDF 的檔案體積</title><link>/you-hua-pdf-de-dang-an-ti-ji.html</link><description>&lt;h1&gt;優化 PDF 的檔案體積&lt;/h1&gt;
&lt;h2&gt;為什麼想要研究這個問題&lt;/h2&gt;
&lt;p&gt;之前重新調整過頁面的排版後發現檔案的體積變大了，而且仔細看一下，可以發現有些頁面，文字變得比較模糊。重新檢查一下自己處理的步驟，原來是用 CEP 取內容時勾選了 deskew ，圖片的格式跑掉了。我想了一下，乾脆探索一下怎麼優化檔案體積，找出在盡可能保持頁面的視覺品質下縮減檔案體積的方法。&lt;/p&gt;
&lt;p&gt;如果是PNG格式的圖片，那影響檔案體積最重要的參數就是顏色的數量，先分析了一下原始檔，看看原製作者用的是怎麼樣校調的：&lt;/p&gt;
&lt;p&gt;&lt;img alt="原始檔使用的顏色數" src="/img/026.png"&gt;&lt;/p&gt;
&lt;p&gt;還真奇怪，因為畫面看起來不像是顏色豐富的感覺，我猜可能是浮水印的關係，把浮水印移除後再重新分析一次&lt;/p&gt;
&lt;p&gt;&lt;img alt="移除浮水印後，純文字部分使用的顏色數" src="/img/027.png"&gt;&lt;/p&gt;
&lt;p&gt;所以，原製作者他最終是把頁面處理成15色的圖檔，只是因為後來打上浮水印的關係使顏色數暴增，不過因為浮水印只佔一小區塊，所以即使顏色數變得混亂，檔案的體積倒是增加的不大。&lt;/p&gt;
&lt;p&gt;如果想進一步縮減檔案的體積，我想到兩個途徑，一個是把每頁文字的部分再進一部轉成 4 色而圖片保持 15 色；另一個途徑是把整張圖片轉成黑白的。&lt;/p&gt;
&lt;h2&gt;方法一：文字４色，插圖１５色&lt;/h2&gt;
&lt;p&gt;先把原始檔中有插圖的頁面找出來，將插圖的位置、大小資訊記錄在 page_with_pic.info 中，然後把插圖和文字分開。&lt;/p&gt;
&lt;p&gt;將文字和插圖分開的 …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">loaxsc</dc:creator><pubDate>Sun, 09 Dec 2018 00:00:00 +0800</pubDate><guid isPermaLink="false">tag:None,2018-12-09:/you-hua-pdf-de-dang-an-ti-ji.html</guid></item><item><title>製作電子書的流程</title><link>/zhi-zuo-dian-zi-shu-de-liu-cheng.html</link><description>&lt;h1&gt;Title&lt;/h1&gt;
&lt;h2&gt;現實&lt;/h2&gt;
&lt;p&gt;我一直是有閱讀電子書的習慣，讀久了就會開始覺得有些電子書的排版和自己的閱讀習慣不是很合拍，譬如：&lt;/p&gt;
&lt;p&gt;&lt;img alt="內容不連貫的電子書" src="/img/002.png"&gt;&lt;/p&gt;
&lt;p&gt;這本書的頁面算是處理得非常好的，大部分的人閱讀起來應該不會有什麼怨言，可是我會希望自己在閱讀時能全神貫注在理解內容上，不希望自己的注意力被分散出去，可是注意到頁面中的內容是不連貫的，那種不連貫就讓我感到很不順眼。這種不連貫雖然很細微，但是會增加人在閱讀時負擔，當你全神貫注在理解內容時，你還必須耗費額外的心力來調整自己視線往返的範圍，而且因為我在做筆記時習慣直接把字打在頁面空白處，這種不一致的排版有時候會找不到地方放筆記，悶啊。&lt;/p&gt;
&lt;p&gt;我原本是用 CEP 來解決這個問題的，CEP就是 ComicEnhancer Pro，原本是作者寫來處理漫畫頁面的，經過時間的演進，慢慢變成很適合處理電子書版面的問題。經過一翻嘗試後我大致上是把版面安排成這樣&lt;/p&gt;
&lt;p&gt;&lt;img alt="用 CEP 修正過的版面" src="/img/004.png"&gt;&lt;/p&gt;
&lt;p&gt;這樣子的話內容是連貫下來的，而且右邊預留了足夠的空間可以做筆記&lt;/p&gt;
&lt;p&gt;大部分的時候我都很滿意這樣的效果，但還是會碰到一些解決不了的情況，譬如說有些書是有註解的，有註解也就算了，排版還分左右頁，左右頁的註解還不同邊&lt;/p&gt;
&lt;p&gt;&lt;img alt="註解在左右邊界的電子書" src="/img/005.png"&gt;&lt;/p&gt;
&lt;p&gt;還有時會遇到內容只有一點點，整個頁面留了一片空白&lt;/p&gt;
&lt;p&gt;&lt;img alt="留有大段空白的頁面" src="/img/003.png"&gt;&lt;/p&gt;
&lt;p&gt;你會覺得那不是必要的，可是用 CEP 並不好處理，雖然不是不能處理，但要採取非常多步驟，非常費工。CEP 是圖形介面的軟體，它有些功能藏在介面的深處，當你需要用到時，常常讓人覺得我只是要做個小處理 …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">loaxsc</dc:creator><pubDate>Sun, 09 Dec 2018 00:00:00 +0800</pubDate><guid isPermaLink="false">tag:None,2018-12-09:/zhi-zuo-dian-zi-shu-de-liu-cheng.html</guid></item></channel></rss>